<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>build modern serverless applications with aws amplify and appsync | Gao Haojun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="AWSAWS-AppSyncAWS-AmplifyAWS-LambdaAWS-DynamoDbWeb-apps" />
  
  
  
  
  <meta name="description" content="In the fast-paced field of web applications, containerization has become not only common but the preferred mode of packaging and delivering web applications. Containers allow us to package our applica">
<meta property="og:type" content="article">
<meta property="og:title" content="Build Modern Serverless Applications with AWS Amplify and AppSync">
<meta property="og:url" content="http://vincentgaohj.github.io/Blog/2021/01/10/Build-Modern-Serverless-Applications-with-AWS-Amplify-and-AppSync/index.html">
<meta property="og:site_name" content="Gao Haojun">
<meta property="og:description" content="In the fast-paced field of web applications, containerization has become not only common but the preferred mode of packaging and delivering web applications. Containers allow us to package our applica">
<meta property="og:locale">
<meta property="og:image" content="https://d1.awsstatic.com/AppSync/How-It-Works-product-page-diagram_AppSync@2x.c39ecb89b7b40ba682cf0f875ae13b6bdd8dca5b.png">
<meta property="og:image" content="https://docs.amplify.aws/images/AmplifyEnvSwitching.jpg">
<meta property="article:published_time" content="2021-01-10T05:59:59.000Z">
<meta property="article:modified_time" content="2021-01-20T14:18:54.668Z">
<meta property="article:author" content="Haojun(Vincent) Gao">
<meta property="article:tag" content="AWS">
<meta property="article:tag" content="AWS-AppSync">
<meta property="article:tag" content="AWS-Amplify">
<meta property="article:tag" content="AWS-Lambda">
<meta property="article:tag" content="AWS-DynamoDb">
<meta property="article:tag" content="Web-apps">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://d1.awsstatic.com/AppSync/How-It-Works-product-page-diagram_AppSync@2x.c39ecb89b7b40ba682cf0f875ae13b6bdd8dca5b.png">
  
    <link rel="alternate" href="/atom.xml" title="Gao Haojun" type="application/atom+xml">
  

  

  <link rel="icon" href="/Blog/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/Blog/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt; src:url("css/fonts/FuturaPTBold.otf") format("woff");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt-light; src:url("css/fonts/FuturaPTBook.otf") format("woff");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt-italic; src:url("css/fonts/FuturaPTBookOblique.otf") format("woff");font-weight:400;font-style:italic;}
}

  </style>
  
<link rel="stylesheet" href="/Blog/css/style.css">


  
<script src="/Blog/js/jquery-3.1.1.min.js"></script>

  
<script src="/Blog/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/Blog/css/bootstrap.css" >

  

  
  

  
    
<link rel="stylesheet" href="/Blog/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/Blog/css/header-post.css" >
  

  
  
  
    <link rel="stylesheet" href="/Blog/css/vdonate.css" >
  

<meta name="generator" content="Hexo 5.2.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                href="#" data-toggle="modal" data-target="#myModal" >
                  <img width="124px" height="124px" alt="Hike News" src="/Blog/css/images/mylogo.jpg">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/Blog/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/Blog/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/Blog/categories">Categories</a> </li>
                
                  <li> <a class="main-nav-link" href="/Blog/tags">Tags</a> </li>
                
                  <li> <a class="main-nav-link" href="/Blog/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/Blog/',
        CONTENT_URL: '/Blog/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/Blog/js/insight.js"></script>


</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Build-Modern-Serverless-Applications-with-AWS-Amplify-and-AppSync" style="width: 75%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Build Modern Serverless Applications with AWS Amplify and AppSync
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/Blog/2021/01/10/Build-Modern-Serverless-Applications-with-AWS-Amplify-and-AppSync/" class="article-date">
	  <time datetime="2021-01-10T05:59:59.000Z" itemprop="datePublished">2021-01-10</time>
	</a>

      
    <a class="article-category-link" href="/Blog/categories/AWS/">AWS</a>

      
	<a class="article-views">
	<span id="busuanzi_container_page_pv">
		PV:<span id="busuanzi_value_page_pv"></span>
	</span>
	</a>

      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the fast-paced field of web applications, containerization has become not only common but the preferred mode of packaging and delivering web applications. Containers allow us to package our applications and deploy them anywhere without having to reconfigure or adapt our applications to the deployment platform. </p>
<p>Amazon Elastic Container Service (Amazon ECS) is the service Amazon provide to run Docker applications on a scalable cluster.</p>
<p><img src="https://d1.awsstatic.com/AppSync/How-It-Works-product-page-diagram_AppSync@2x.c39ecb89b7b40ba682cf0f875ae13b6bdd8dca5b.png" alt=""></p>
<a id="more"></a>
<h2 id="AWS-Amplify"><a href="#AWS-Amplify" class="headerlink" title="AWS Amplify"></a><a target="_blank" rel="noopener" href="https://docs.amplify.aws/">AWS Amplify</a></h2><p>AWS Amplify is a set of products and tools that enable mobile and front-end web developers to build and deploy secure, scalable full-stack applications, powered by AWS.</p>
<h3 id="Common-Command-Line"><a href="#Common-Command-Line" class="headerlink" title="Common Command Line"></a>Common Command Line</h3><ul>
<li><code>amplify &lt;category&gt; &lt;subcommand&gt;</code><ul>
<li><code>amplify &lt;category&gt; add</code>: Add resources of a category to the cloud.<ul>
<li>Place a CloudFormation template for the resources of this category in the category’s subdirectory <code>amplify/backend/\&lt;category\&gt;</code></li>
<li>Insert its reference into the above-mentioned root stack as the nested child stack. </li>
<li>When working in teams, it is good practice to run an <code>amplify pull</code> before modifying the backend categories.</li>
</ul>
</li>
<li><code>amplify &lt;category&gt; update</code></li>
<li><code>amplify &lt;category&gt; remove</code></li>
<li><code>amplify &lt;category&gt; push</code></li>
</ul>
</li>
<li><code>amplify push</code>: Once you have made your category updates, run the command <code>amplify push</code> to update the cloud resources.</li>
<li><code>amplify pull</code>: Operates similar to a <em>git pull</em>.</li>
<li><code>amplify env &lt;subcommand&gt;</code>: Control multiple environment<ul>
<li><code>amplify env add</code></li>
<li><code>amplify env list</code></li>
<li><code>amplify env checkout</code></li>
<li><code>amplify env remove</code></li>
</ul>
</li>
<li><code>amplify console</code>:  Launches the browser directing you to your cloud project in the AWS Amplify Console. </li>
<li><code>amplify delete</code></li>
<li><code>amplify init</code>: the root stack is created with three resources:<ul>
<li>IAM role for unauthenticated users</li>
<li>IAM role for authenticated users</li>
<li>S3 bucket, the deployment bucket, to support this provider’s workflow</li>
</ul>
</li>
<li><code>amplify publish</code></li>
<li><code>amplify run</code></li>
<li><code>amplify status</code></li>
</ul>
<h3 id="Amplify-CLI"><a href="#Amplify-CLI" class="headerlink" title="Amplify CLI"></a>Amplify CLI</h3><p>The Amplify Command Line Interface (CLI) is a unified tool-chain to create, integrate, and manage the AWS cloud services for your app.</p>
<ul>
<li><strong>Authentication: </strong>The Amplify CLI supports configuring many different Authentication and Authorization workflows, including simple and advanced configurations of the login options, triggering Lambda functions during different lifecycle events, and administrative actions which you can optionally expose to your applications.</li>
<li><strong>API(GraphQL): </strong>The GraphQL Transform provides a simple to use abstraction that helps you quickly create backends for your web and mobile applications on AWS. With the GraphQL Transform, you define your application’s data model using the GraphQL Schema Definition Language (SDL) and the library handles converting your SDL definition into a set of fully descriptive AWS CloudFormation templates that implement your data model.</li>
<li><strong>Serverless Functions: </strong>You can add a Lambda function to your project which you can use alongside a REST API or as a data source in your GraphQL API using the <a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/function"><code>@function</code> directive</a>.</li>
<li><strong>Storage: </strong>Amplify CLI’s <code>storage</code> category enables you to create and manage cloud-connected file &amp; data storage. Use the <code>storage</code> category when you need to store:<ol>
<li>app content (images, audio, video etc.) in an public, protected or private storage bucket or</li>
<li>app data in a NoSQL database and access it with a REST API + Lambda</li>
</ol>
</li>
</ul>
<h3 id="Directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h3><p><strong>The Amplify CLI provides GraphQL <code>directives</code> to enhance your schema with additional capabilities, such as custom indexes, authorization rules, function triggers and more.</strong></p>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/model"><code>@model</code>: Defines a top level object type in your API that are backed by Amazon DynamoDB</a></p>
<ul>
<li><p>Allows you to easily define top level object types in your API that are backed by Amazon DynamoDB.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># override the names of any generated queries, mutations and subscriptions, or remove operations entirely.</span></span><br><span class="line"><span class="string">type</span> <span class="string">Post</span> <span class="string">@model(queries:</span> &#123; <span class="attr">get:</span> <span class="string">&quot;post&quot;</span> &#125;<span class="string">,</span> <span class="attr">mutations:</span> <span class="literal">null</span><span class="string">,</span> <span class="attr">subscriptions:</span> <span class="literal">null</span><span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span> <span class="comment"># id: ID! is a required attribute.</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">tags:</span> [<span class="string">String!</span>]<span class="string">!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/key"><code>@key</code>: Configures custom index structures for @model types</a></p>
<ul>
<li><p>The <code>@key</code> directive makes it simple to configure custom index structures for <code>@model</code> types.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@key(fields:</span> [<span class="string">String!</span>]<span class="type">!,</span> <span class="attr">name:</span> <span class="string">String,</span> <span class="attr">queryField:</span> <span class="string">String)</span> <span class="string">on</span> <span class="string">OBJECT</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>A <code>@key</code> without a <em>name</em> specifies the key for the DynamoDB table’s primary index. You may only provide 1 <code>@key</code> without a <em>name</em> per <code>@model</code> type.</p>
</li>
<li><p><strong>Argument</strong></p>
<ul>
<li><strong><code>fields</code></strong><ul>
<li>The first field in the list will always be the <strong>HASH</strong> key.</li>
<li>If two fields are provided the second field will be the <strong>SORT</strong> key.</li>
<li>If more than two fields are provided, a single composite <strong>SORT</strong> key will be created from a combination of <code>fields[1...n]</code>.</li>
</ul>
</li>
<li><strong><code>name</code></strong><ul>
<li>When provided, specifies the name of the secondary index.</li>
<li>When omitted, specifies that the <code>@key</code> is defining the primary index. </li>
</ul>
</li>
<li><strong><code>queryField</code></strong><ul>
<li>When defining a secondary index (by specifying the <em>name</em> argument), this specifies that a new top level query field that queries the secondary index should be generated with the given name.</li>
</ul>
</li>
</ul>
</li>
<li><p>Using the new ‘todosByStatus’ query you can fetch todos by ‘status’</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Todo</span> <span class="string">@model</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;todosByStatus&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;status&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;todosByStatus&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">status:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">query</span> <span class="string">todosByStatus</span> &#123;</span><br><span class="line">  <span class="string">todosByStatus(status:</span> <span class="string">&quot;completed&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">    <span class="string">items</span> &#123;</span><br><span class="line">      <span class="string">id</span></span><br><span class="line">      <span class="string">name</span></span><br><span class="line">      <span class="string">status</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/auth"><code>@auth</code>: Defines authorization rules for your @model types and fields</a></p>
<ul>
<li><p>Authorization is required for applications to interact with your GraphQL API. <strong>API Keys</strong> are best used for public APIs (or parts of your schema which you wish to be public) or prototyping, and you must specify the expiration time before deploying.</p>
</li>
<li><p>When applied to a type, augments the application with owner and group-based authorization rules.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@auth(rules:</span> [<span class="string">AuthRule!</span>]<span class="type">!)</span> <span class="string">on</span> <span class="string">OBJECT</span> <span class="string">|</span> <span class="string">FIELD_DEFINITION</span></span><br><span class="line"><span class="string">input</span> <span class="string">AuthRule</span> &#123;</span><br><span class="line">  <span class="attr">allow:</span> <span class="string">AuthStrategy!</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">AuthProvider</span></span><br><span class="line">  <span class="attr">ownerField:</span> <span class="string">String</span> <span class="comment"># defaults to &quot;owner&quot; when using owner auth</span></span><br><span class="line">  <span class="attr">identityClaim:</span> <span class="string">String</span> <span class="comment"># defaults to &quot;username&quot; when using owner auth</span></span><br><span class="line">  <span class="attr">groupClaim:</span> <span class="string">String</span> <span class="comment"># defaults to &quot;cognito:groups&quot; when using Group auth</span></span><br><span class="line">  <span class="attr">groups:</span> [<span class="string">String</span>]  <span class="comment"># Required when using Static Group auth</span></span><br><span class="line">  <span class="attr">groupsField:</span> <span class="string">String</span> <span class="comment"># defaults to &quot;groups&quot; when using Dynamic Group auth</span></span><br><span class="line">  <span class="attr">operations:</span> [<span class="string">ModelOperation</span>] <span class="comment"># Required for finer control</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>only the owner of the object has the authorization to perform read (<code>getTodo</code> and <code>listTodos</code>), update (<code>updateTodo</code>), and delete (<code>deleteTodo</code>) operations on the owner created object</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Todo</span> <span class="string">@model</span></span><br><span class="line">  <span class="string">@auth(rules:</span> [&#123; <span class="attr">allow:</span> <span class="string">owner</span> &#125;]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">updatedAt:</span> <span class="string">AWSDateTime!</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>only the owner of the object has the authorization to perform update (<code>updateTodo</code>) and delete (<code>deleteTodo</code>) operations on the owner created object, but anyone can read them (<code>getTodo</code>, <code>listTodos</code>). </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Todo</span> <span class="string">@model</span></span><br><span class="line">  <span class="string">@auth(rules:</span> [&#123; <span class="attr">allow:</span> <span class="string">owner</span>, <span class="attr">operations:</span> [<span class="string">create</span>, <span class="string">delete</span>, <span class="string">update</span>] &#125;]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">updatedAt:</span> <span class="string">AWSDateTime!</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/connection"><code>@connection</code>: Defines 1:1, 1:M, and N:M relationships between @model types</a></p>
<ul>
<li><p><strong>Has one:</strong> In the simplest case, you can define a one-to-one connection where a project has one team:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Project</span> <span class="string">@model</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String</span></span><br><span class="line">  <span class="attr">team:</span> <span class="string">Team</span> <span class="string">@connection</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Team</span> <span class="string">@model</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Has many:</strong> The following schema defines a Post that can have many comments:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Post</span> <span class="string">@model</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">comments:</span> [<span class="string">Comment</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byPost&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Comment</span> <span class="string">@model</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byPost&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;postID&quot;</span>, <span class="string">&quot;content&quot;</span>]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">postID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/function"><code>@function</code>: Configures a Lambda function resolvers for a field</a></p>
<ul>
<li><p>The <code>@function</code> directive allows you to quickly &amp; easily configure AWS Lambda resolvers within your AWS AppSync API.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@function(name:</span> <span class="string">String!,</span> <span class="attr">region:</span> <span class="string">String)</span> <span class="string">on</span> <span class="string">FIELD_DEFINITION</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># You can connect this function to your AppSync API deployed via Amplify using this schema:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Using this as the entry point, you can use a single function to handle many resolvers.</span></span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Query</span> &#123;</span><br><span class="line">    <span class="attr">posts:</span> [<span class="string">Post</span>] <span class="string">@function(name:</span> <span class="string">&quot;GraphQLResolverFunction&quot;</span><span class="string">)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">type</span> <span class="string">Post</span> &#123;</span><br><span class="line">    <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">String!</span></span><br><span class="line">    <span class="attr">comments:</span> [<span class="string">Comment</span>] <span class="string">@function(name:</span> <span class="string">&quot;GraphQLResolverFunction&quot;</span><span class="string">)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="string">type</span> <span class="string">Comment</span> &#123;</span><br><span class="line">    <span class="attr">postId:</span> <span class="string">ID!</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/http"><code>@http</code>: Configures an HTTP resolver for a field</a></p>
<ul>
<li><p>The <code>@http</code> directive allows you to quickly configure HTTP resolvers within your AWS AppSync API.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@http(method:</span> <span class="string">HttpMethod,</span> <span class="attr">url:</span> <span class="string">String!,</span> <span class="attr">headers:</span> [<span class="string">HttpHeader</span>]<span class="string">)</span> <span class="string">on</span> <span class="string">FIELD_DEFINITION</span></span><br><span class="line"><span class="string">enum</span> <span class="string">HttpMethod</span> &#123; <span class="string">PUT</span> <span class="string">POST</span> <span class="string">GET</span> <span class="string">DELETE</span> <span class="string">PATCH</span> &#125;</span><br><span class="line"><span class="string">input</span> <span class="string">HttpHeader</span> &#123;</span><br><span class="line">  <span class="attr">key:</span> <span class="string">String</span></span><br><span class="line">  <span class="attr">value:</span> <span class="string">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>The directive allows you to define URL path parameters, and specify a query string and/or specify a request body.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Post</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">String</span></span><br><span class="line">  <span class="attr">description:</span> <span class="string">String</span></span><br><span class="line">  <span class="attr">views:</span> <span class="string">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Query</span> &#123;</span><br><span class="line">  <span class="attr">listPosts:</span> <span class="string">Post</span> <span class="string">@http(url:</span> <span class="string">&quot;https://www.example.com/posts&quot;</span><span class="string">)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/predictions"><code>@predictions</code>: Queries an orchestration of AI/ML services such as Amazon Rekognition, Amazon Translate, and/or Amazon Polly</a></p>
<ul>
<li><p>The <code>@predictions</code> directive allows you to query an orchestration of AI/ML services such as Amazon Rekognition, Amazon Translate, and/or Amazon Polly.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@predictions(actions:</span> [<span class="string">PredictionsActions!</span>]<span class="type">!)</span> <span class="string">on</span> <span class="string">FIELD_DEFINITION</span></span><br><span class="line"><span class="string">enum</span> <span class="string">PredictionsActions</span> &#123;</span><br><span class="line">  <span class="string">identifyText</span> <span class="comment"># uses Amazon Rekognition to detect text</span></span><br><span class="line">  <span class="string">identifyLabels</span> <span class="comment"># uses Amazon Rekognition to detect labels</span></span><br><span class="line">  <span class="string">convertTextToSpeech</span> <span class="comment"># uses Amazon Polly in a lambda to output a presigned url to synthesized speech</span></span><br><span class="line">  <span class="string">translateText</span> <span class="comment"># uses Amazon Translate to translate text from source to target language</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/searchable"><code>@searchable</code>: Makes your data searchable by streaming it to Elasticsearch</a></p>
<ul>
<li><p>The <code>@searchable</code> directive handles streaming the data of an <code>@model</code> object type to Amazon Elasticsearch Service and configures search resolvers that search that information.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Streams data from DynamoDB to Elasticsearch and exposes search capabilities.</span></span><br><span class="line"><span class="string">directive</span> <span class="string">@searchable(queries:</span> <span class="string">SearchableQueryMap)</span> <span class="string">on</span> <span class="string">OBJECT</span></span><br><span class="line"><span class="string">input</span> <span class="string">SearchableQueryMap</span> &#123; <span class="attr">search:</span> <span class="string">String</span> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/versioned"><code>@versioned</code>: Defines the versioning and conflict resolution strategy for an @model type</a></p>
<ul>
<li><p>The <code>@versioned</code> directive adds object versioning and conflict resolution to a type. Do not use this directive when leveraging DataStore as the conflict detection and resolution features are automatically handled inside AppSync and are incompatible with the <code>@versioned</code> directive.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">directive</span> <span class="string">@versioned(versionField:</span> <span class="string">String</span> <span class="string">=</span> <span class="string">&quot;version&quot;</span><span class="string">,</span> <span class="attr">versionInput:</span> <span class="string">String</span> <span class="string">=</span> <span class="string">&quot;expectedVersion&quot;</span><span class="string">)</span> <span class="string">on</span> <span class="string">OBJECT</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Team-Environment"><a href="#Team-Environment" class="headerlink" title="Team Environment"></a>Team Environment</h3><p>For multiple environments, Amplify matches the standard Git workflow where you switch between different branches using the <code>env checkout</code> command - similar to running <code>git checkout BRANCHNAME</code>, run <code>amplify env checkout ENVIRONMENT_NAME</code> to switch between environments. </p>
<p><img src="https://docs.amplify.aws/images/AmplifyEnvSwitching.jpg" alt="Image"></p>
<hr>
<h2 id="Modeling-Relational-Data-in-DynamoDB"><a href="#Modeling-Relational-Data-in-DynamoDB" class="headerlink" title="Modeling Relational Data in DynamoDB"></a><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/bp-modeling-nosql.html">Modeling Relational Data in DynamoDB</a></h2><h3 id="Data-access-patterns"><a href="#Data-access-patterns" class="headerlink" title="Data access patterns"></a><a target="_blank" rel="noopener" href="https://docs.amplify.aws/cli/graphql-transformer/dataaccess">Data access patterns</a></h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">type</span> <span class="string">Order</span> <span class="string">@model</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 6. Show all open orders within a given date range across all customers</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># The @key byCustomerByStatusByDate enables you to run a query that would work for this access pattern.</span></span><br><span class="line">  <span class="comment"># In this example, a composite sort key (combination of two or more keys) with the status and date is used.</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getCustomerWithOrdersByStatusDate($customerID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getCustomer(id: $customerID) &#123;</span></span><br><span class="line">  <span class="comment">#     ordersByStatusDate (statusDate: &#123;</span></span><br><span class="line">  <span class="comment">#       between: [&#123; status: &quot;pending&quot;, date: &quot;2018-01-22&quot;&#125;,&#123; status: &quot;pending&quot;, date: &quot;2020-10-11&quot;&#125;]&#125;) </span></span><br><span class="line">  <span class="comment">#         &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byCustomerByStatusByDate&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;customerID&quot;</span>, <span class="string">&quot;status&quot;</span>, <span class="string">&quot;date&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 5. Get orders for a given customer within a given date range</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># There is a one-to-many relation that lets all the orders of a customer be queried.</span></span><br><span class="line">  <span class="comment"># This relationship is created by having the @key name `byCustomerByDate` on the Order model </span></span><br><span class="line">  <span class="comment"># that is queried by the connection on the orders field of the Customer model.</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getCustomerWithOrdersByDate($customerID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getCustomer(id: $customerID) &#123;</span></span><br><span class="line">  <span class="comment">#     ordersByDate(date: &#123;between: [ &quot;2018-01-22&quot;, &quot;2020-10-11&quot; ]&#125;) </span></span><br><span class="line">  <span class="comment">#       &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byCustomerByDate&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;customerID&quot;</span>, <span class="string">&quot;date&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 12. Get orders by account representative and date</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># As can be seen in the AccountRepresentative model </span></span><br><span class="line">  <span class="comment"># this connection uses the byRepresentativebyDate field on the Order model to create the connection needed. </span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getOrdersForAccountRepresentative($representativeId: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getAccountRepresentative(id: $representativeId) &#123;</span></span><br><span class="line">  <span class="comment">#     id</span></span><br><span class="line">  <span class="comment">#     orders(date: &#123;between: [&quot;2010-01-22&quot;, &quot;2020-10-11&quot;]&#125;) </span></span><br><span class="line">  <span class="comment">#       &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byRepresentativebyDate&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;accountRepresentativeID&quot;</span>, <span class="string">&quot;date&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 9. Get all items on order for a given product</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># This access-pattern would use a one-to-many relation from products to orders</span></span><br><span class="line">  <span class="comment"># With this query we can get all orders of a given product:</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getProductOrders($productID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getProduct(id: $productID) &#123;</span></span><br><span class="line">  <span class="comment">#     id</span></span><br><span class="line">  <span class="comment">#     orders &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byProduct&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;productID&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">customerID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">accountRepresentativeID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">productID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">status:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">amount:</span> <span class="string">Int!</span></span><br><span class="line">  <span class="attr">date:</span> <span class="string">String!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Customer</span> <span class="string">@model</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 11. Get customers by account representative</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># This uses a one-to-many connection between account representatives and customers</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getCustomersForAccountRepresentative($representativeId: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getAccountRepresentative(id: $representativeId) &#123;</span></span><br><span class="line">  <span class="comment">#     customers </span></span><br><span class="line">  <span class="comment">#       &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byRepresentative&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;accountRepresentativeID&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">phoneNumber:</span> <span class="string">String</span></span><br><span class="line">  <span class="attr">accountRepresentativeID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="comment"># 5. Get orders for a given customer within a given date range</span></span><br><span class="line">  <span class="attr">ordersByDate:</span> [<span class="string">Order</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byCustomerByDate&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># 6. Show all open orders within a given date range across all customers</span></span><br><span class="line">  <span class="attr">ordersByStatusDate:</span> [<span class="string">Order</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byCustomerByStatusByDate&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Employee</span> <span class="string">@model</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 7. See all employees hired recently</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Query by whether an employee has been hired recently</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query employeesNewHire &#123;</span></span><br><span class="line">  <span class="comment">#   employeesNewHire(newHire: &quot;true&quot;) </span></span><br><span class="line">  <span class="comment">#     &#123;items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;newHire&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;newHire&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;employeesNewHire&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Query and have the results returned by start date</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query employeesNewHireByDate &#123;</span></span><br><span class="line">  <span class="comment">#   employeesNewHireByStartDate(newHire: &quot;true&quot;) </span></span><br><span class="line">  <span class="comment">#     &#123;items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;newHireByStartDate&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;newHire&quot;</span>, <span class="string">&quot;startDate&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;employeesNewHireByStartDate&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 2. Query employee details by employee name</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query employeeByName($name: String!) &#123;</span></span><br><span class="line">  <span class="comment">#   employeeByName(name: $name) &#123;items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byName&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;employeeByName&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 14. Get all employees with a given job title</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Using the byTitle @key makes this access pattern quite easy</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query employeesByJobTitle &#123;</span></span><br><span class="line">  <span class="comment">#   employeesByJobTitle(jobTitle: &quot;Manager&quot;) </span></span><br><span class="line">  <span class="comment">#     &#123;items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byTitle&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;jobTitle&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;employeesByJobTitle&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 8. Find all employees working in a given warehouse</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># This needs a one to many relationship from warehouses to employees</span></span><br><span class="line">  <span class="comment"># This connection uses the byWarehouse key on the Employee model. </span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getWarehouse($warehouseID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getWarehouse(id: $warehouseID) &#123;</span></span><br><span class="line">  <span class="comment">#     id</span></span><br><span class="line">  <span class="comment">#     employees&#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byWarehouse&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;warehouseID&quot;</span>, <span class="string">&quot;id&quot;</span>]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">startDate:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">phoneNumber:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">warehouseID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">jobTitle:</span> <span class="string">String!</span></span><br><span class="line">  <span class="attr">newHire:</span> <span class="string">String!</span> <span class="comment"># We have to use String type, because Boolean types cannot be sort keys</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Warehouse</span> <span class="string">@model</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="comment"># 8. Find all employees working in a given warehouse</span></span><br><span class="line">  <span class="attr">employees:</span> [<span class="string">Employee</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byWarehouse&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">AccountRepresentative</span> <span class="string">@model</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 17. Get sales representatives ranked by order total and sales period</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># The sales period is either a date range or maybe even a month or week. </span></span><br><span class="line">  <span class="comment"># Therefore we can set the sales period as a string and query using the combination of salesPeriod and orderTotal. </span></span><br><span class="line">  <span class="comment"># We can also set the sortDirection in order to get the return values from largest to smallest</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query repsByPeriodAndTotal &#123;</span></span><br><span class="line">  <span class="comment">#   repsByPeriodAndTotal(</span></span><br><span class="line">  <span class="comment">#     sortDirection: DESC,</span></span><br><span class="line">  <span class="comment">#     salesPeriod: &quot;January 2019&quot;,</span></span><br><span class="line">  <span class="comment">#     orderTotal: &#123;ge: 1000&#125;) </span></span><br><span class="line">  <span class="comment">#       &#123;items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;bySalesPeriodByOrderTotal&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;salesPeriod&quot;</span>, <span class="string">&quot;orderTotal&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;repsByPeriodAndTotal&quot;</span><span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="comment"># 11. Get customers by account representative</span></span><br><span class="line">  <span class="attr">customers:</span> [<span class="string">Customer</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byRepresentative&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># 12. Get orders by account representative and date</span></span><br><span class="line">  <span class="attr">orders:</span> [<span class="string">Order</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byRepresentativebyDate&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="attr">orderTotal:</span> <span class="string">Int</span></span><br><span class="line">  <span class="attr">salesPeriod:</span> <span class="string">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Inventory</span> <span class="string">@model</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 15. Get inventory by product by warehouse</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># We can also get all inventory from an individual warehouse </span></span><br><span class="line">  <span class="comment"># by using the itemsByWarehouseID query created by the byWarehouseID key</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query byWarehouseId($warehouseID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   itemsByWarehouseID(warehouseID: $warehouseID) &#123;</span></span><br><span class="line">  <span class="comment">#     items &#123;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(name:</span> <span class="string">&quot;byWarehouseID&quot;</span><span class="string">,</span> <span class="attr">fields:</span> [<span class="string">&quot;warehouseID&quot;</span>]<span class="string">,</span> <span class="attr">queryField:</span> <span class="string">&quot;itemsByWarehouseID&quot;</span><span class="string">)</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 10. Get current inventories for a product at all warehouses</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># The query needed to get the inventories of a product in all warehouses</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query getProductInventoryInfo($productID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getProduct(id: $productID) &#123;</span></span><br><span class="line">  <span class="comment">#     id</span></span><br><span class="line">  <span class="comment">#     inventories &#123;items &#123;&#125;&#125;&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># 15. Get inventory by product by warehouse</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># Here having the inventories be held in a separate model is particularly useful </span></span><br><span class="line">  <span class="comment"># since this model can have its own partition key and sort key </span></span><br><span class="line">  <span class="comment"># such that the inventories themselves can be queried as is needed for this access-pattern.</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="comment"># query inventoryByProductAndWarehouse($productID: ID!, $warehouseID: ID!) &#123;</span></span><br><span class="line">  <span class="comment">#   getInventory(productID: $productID, warehouseID: $warehouseID) &#123;</span></span><br><span class="line">  <span class="comment">#     productID</span></span><br><span class="line">  <span class="comment">#     warehouseID</span></span><br><span class="line">  <span class="comment">#     inventoryAmount&#125;&#125;</span></span><br><span class="line">  <span class="comment"># -----------------------------------------------------------</span></span><br><span class="line">  <span class="string">@key(fields:</span> [<span class="string">&quot;productID&quot;</span>, <span class="string">&quot;warehouseID&quot;</span>]<span class="string">)</span> &#123;</span><br><span class="line">  <span class="attr">productID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">warehouseID:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">inventoryAmount:</span> <span class="string">Int!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">type</span> <span class="string">Product</span> <span class="string">@model</span> &#123;</span><br><span class="line">  <span class="attr">id:</span> <span class="string">ID!</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">String!</span></span><br><span class="line">  <span class="comment"># 9. Get all items on order for a given product</span></span><br><span class="line">  <span class="attr">orders:</span> [<span class="string">Order</span>] <span class="string">@connection(keyName:</span> <span class="string">&quot;byProduct&quot;</span>, <span class="attr">fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">  <span class="comment"># 10. Get current inventories for a product at all warehouses</span></span><br><span class="line">  <span class="attr">inventories:</span> [<span class="string">Inventory</span>] <span class="string">@connection(fields:</span> [<span class="string">&quot;id&quot;</span>]<span class="string">)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="AWS-Lambda-in-Python"><a href="#AWS-Lambda-in-Python" class="headerlink" title="AWS Lambda in Python"></a><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-python.html">AWS Lambda in Python</a></h2><h3 id="Lambda-deployment-packages"><a href="#Lambda-deployment-packages" class="headerlink" title="Lambda deployment packages"></a>Lambda deployment packages</h3><p>Your AWS Lambda function’s code consists of scripts or compiled programs and their dependencies. You use a <em>deployment package</em> to deploy your function code to Lambda. Lambda supports two types of deployment packages: container images and .zip files.</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-images.html">Container images</a></p>
</li>
<li><p>.zip file archives</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html">AWS Lambda layers</a>.</p>
</li>
<li><p>Using other AWS services to build a deployment package</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <div id="donation_div"></div>


<script src="/Blog/js/vdonate.js"></script>

<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/WeChanQR.png',
  alipayImage: 'https://raw.githubusercontent.com/iTimeTraveler/iTimeTraveler.github.io/site/source/about/donate/images/AliPayQR.jpg'
});
</script>
      
      
      <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
          <strong>Post author:  </strong>Haojun(Vincent) Gao</a>
          </li>
          <li class="post-copyright-link">
          <strong>Post link:  </strong>
          <a href="/Blog/2021/01/10/Build-Modern-Serverless-Applications-with-AWS-Amplify-and-AppSync/" target="_blank" title="Build Modern Serverless Applications with AWS Amplify and AppSync">http://vincentgaohj.github.io/Blog/2021/01/10/Build-Modern-Serverless-Applications-with-AWS-Amplify-and-AppSync/</a>
          </li>
          <li class="post-copyright-license">
            <strong>Copyright Notice:   </strong>
            All articles in this blog are licensed under <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">CC BY-NC-ND 4.0</a>
            unless stating additionally.
          </li>
         
        </ul>
<div>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
      
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/AWS/" rel="tag">AWS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/AWS-Amplify/" rel="tag">AWS-Amplify</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/AWS-AppSync/" rel="tag">AWS-AppSync</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/AWS-DynamoDb/" rel="tag">AWS-DynamoDb</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/AWS-Lambda/" rel="tag">AWS-Lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/Blog/tags/Web-apps/" rel="tag">Web-apps</a></li></ul>

      

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/Blog/2021/01/17/The-Design-Principle-of-Pytorch-Architecture/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          The Design Principle of PyTorch Architecture
        
      </div>
    </a>
  
  
    <a href="/Blog/2021/01/08/AWS-Solution-Architect-Associate-4-Advanced-IAM/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">AWS Solution Architect(Associate) - Advanced IAM</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="toc-sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#AWS-Amplify"><span class="nav-number">1.</span> <span class="nav-text">AWS Amplify</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Common-Command-Line"><span class="nav-number">1.1.</span> <span class="nav-text">Common Command Line</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Amplify-CLI"><span class="nav-number">1.2.</span> <span class="nav-text">Amplify CLI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Directives"><span class="nav-number">1.3.</span> <span class="nav-text">Directives</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Team-Environment"><span class="nav-number">1.4.</span> <span class="nav-text">Team Environment</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modeling-Relational-Data-in-DynamoDB"><span class="nav-number">2.</span> <span class="nav-text">Modeling Relational Data in DynamoDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-access-patterns"><span class="nav-number">2.1.</span> <span class="nav-text">Data access patterns</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AWS-Lambda-in-Python"><span class="nav-number">3.</span> <span class="nav-text">AWS Lambda in Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lambda-deployment-packages"><span class="nav-number">3.1.</span> <span class="nav-text">Lambda deployment packages</span></a></li></ol></li></ol>
    
    </div>
  </aside>

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2013 - 2021 Gao Haojun All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				UV : <span id="busuanzi_value_site_uv"></span> |  
				PV : <span id="busuanzi_value_site_pv"></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>



<!-- 2017.6.11，masikkk新增，加载本地Google Prettify 代码高亮js代码 -->

<!--
<script src="/Blog/js/prettify.js"></script>
-->

<!-- 2017.6.11，masikkk新增，用于Google Prettify 代码高亮，给pre标签添加class "prettyprint linenums"，有行号 -->
<!-- jQuery的$(window).load(function(){})是在页面所有元素(包括所有css,js,图片,Flash等)加载完毕后执行
<script type="text/javascript">
$(window).load(function(){
 $('pre').addClass('prettyprint linenums');
 $('code').addClass('prettyprint');
 prettyPrint();
 })
</script>
-->
<!-- 2017.7.1，masikkk添加，用于Google Prettify 代码高亮，给pre标签添加class "prettyprint linenums"，有行号 -->
<!-- jQuery的$(document).ready(function(){})是当页面的标准DOM元素被解析成DOM树后就执行 -->

<!--
<script type="text/javascript">
$(document).ready(function(){
 $('pre').addClass('prettyprint linenums');
 $('code').addClass('prettyprint');
 prettyPrint();
 })
</script>
-->

<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>



    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/Blog/" class="mobile-nav-link">Home</a>
  
    <a href="/Blog/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/Blog/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/Blog/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/Blog/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/Blog/fancybox/jquery.fancybox.css">

  
<script src="/Blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/Blog/js/scripts.js"></script>





  
<script src="/Blog/js/dialog.js"></script>









	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Gao Haojun
          </div>
          <div class="panel-body">
            Copyright © 2021 Haojun(Vincent) Gao All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
    <a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>
  
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>